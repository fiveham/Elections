<!DOCTYPE html>
<!-- Copied and pasted from Google at https://developers.google.com/maps/documentation/javascript/examples/layer-kml -->
<html>
  <head>
    <link rel="shortcut icon" href="https://raw.githubusercontent.com/fiveham/Elections/master/docs/images/nc-rwb-check.png">
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <meta property="og:image" 
          content="http://raw.githubusercontent.com/fiveham/Elections/master/docs/images/nc-reg-map-screenshot-square.png" />
    <meta property="og:image:url" 
          content="http://raw.githubusercontent.com/fiveham/Elections/master/docs/images/nc-reg-map-screenshot-square.png" />
    <meta property="og:image:secure_url" 
          content="https://raw.githubusercontent.com/fiveham/Elections/master/docs/images/nc-reg-map-screenshot-square.png" />
    <meta property="og:image:alt" 
          content="A satelite image of the eastern coast of North America from Maryland to Florida overlaid by a semitransparent gray polygon covering North Carolina. Sites required by the NVRA to provide voter registration forms are marked across the state by icons indicating the type of site." />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:width" content="1660" />
    <meta property="og:image:height" content="1660" />
    <meta property="og:url" content="https://fiveham.github.io/Elections/2019/register/nc/sites.html" />
    <meta property="og:type" content="website" />
    <meta property="og:determiner" content="" />
    <meta property="og:title" content="Where to Register to Vote in NC - Interactive Map" />
    <meta property="og:description" 
          content="Interactive map of sites in North Carolina required by the NVRA to provide voter registration forms" />
    
    <title>Where to Register to Vote in NC - Interactive Map</title>
    
    <link rel="stylesheet" type="text/css" href="/Elections/css/fullpage-map.css">
    <link rel="stylesheet" type="text/css" href="/Elections/css/balloon-dimensions.css">
    <link rel="stylesheet" type="text/css" href="/Elections/css/balloon-guts.css">
    <link rel="stylesheet" type="text/css" href="/Elections/css/map-controls.css">
    <link rel="stylesheet" type="text/css" href="/Elections/css/geolocator.css">
    <style>
      .text-control {
        padding-left: 17px;
        padding-right: 17px;
        font-size: 18px;
        vertical-align: middle;
        line-height: 100%;
        text-align: center;
        display: table;
        font-family: Roboto, Arial, sans-serif;
      }
      .text-control > span {
        vertical-align: middle;
        display: table-cell;
        padding: 0;
        margin: 0;
        border: none;
      }
      
      .no-select{
        -webkit-touch-callout: none; /* iOS Safari */
        -webkit-user-select:   none; /* Safari */
        -khtml-user-select:    none; /* Konqueror HTML */
        -moz-user-select:      none; /* Firefox */
        -ms-user-select:       none; /* Internet Explorer/Edge */
        user-select:           none; /* Non-prefixed version, currently
                                        supported by Chrome and Opera */
      }
      
      #about-modal .closer[role="button"] {
        cursor: pointer;
        font-size: larger;
        position: absolute;
        padding: 2px 3px; /* Maybe 0.3em or something would be better */
        top: 0;
        right: 0;
        z-index: 1; /* Place closer over other content of modal */
      }
      
      #about-modal {
        border-radius: 2px;
        box-shadow: rgba(0, 0, 0, 0.3) 0px 1px 4px -1px;
        position: absolute;
        font-size: larger;
        visibility: hidden;
        background-color: white;
        padding: 0 0 0 10px;
      }
      
      #about-modal .content {
        padding-bottom: 10px;
      }
      
      #about-modal .has-scrollbar {
        overflow-y: auto;
        margin-top: 23px;
      }
      /* Based on Google Maps infowindows */
      #about-modal .has-scrollbar::-webkit-scrollbar {
        width: 18px;
        height: 12px;
        -moz-appearance: none;
        -webkit-appearance: none;
        appearance: none;
      }
      #about-modal .has-scrollbar::-webkit-scrollbar-corner {
        background: transparent;
      }
      #about-modal .has-scrollbar::-webkit-scrollbar-thumb {
        background-color: rgba(0,0,0,0.12);
        border: 6px solid transparent;
        border-radius: 9px;
        background-clip: content-box;
      }
      #about-modal .has-scrollbar::-webkit-scrollbar-track, 
      #about-modal .has-scrollbar::-webkit-scrollbar-track-piece {
        background: #fff;
      }
      /*#about-modal .has-scrollbar::-webkit-scrollbar-button {}
      #about-modal .has-scrollbar::-webkit-resizer {}/**/
      
      #about-modal p.heading {
        font-weight: bold;
        font-size: larger;
      }
      
      #about-modal td {
        padding-top: 1px;
        padding-bottom: 1px;
      }
      
      #about-modal table td {
        background-repeat:   no-repeat;
        background-size:     contain;
        background-position: center;
        background-origin:   content-box;
      }
    </style>
    
  </head>
  <body>
    <!-- Geolocator button -->
    <div id="geolocation" class="geolocate installed-controls top-control" onclick="geolocate();" role="button" 
         title="Go to your geolocation"></div>
    
    <!-- Toggle one-stop sites button -->
    <div id="os-toggler" class="installed-controls top-control no-select text-control" onclick="os_toggle()" role="button" 
         title="Turn one-stop (early voting) site layer on or off.">
      <span id="pp-swap">Toggle One-Stop Sites</span>
    </div>
    
    <!-- 'About' button -->
    <div id="about-btn" class="installed-controls left bottom text-control no-select" onclick="toggle_modal()" role="button" title="About this map">
      <span>About</span>
    </div>
    
    <!-- 'About' modal -->
    <div id="about-modal">
      <div role="button" class="closer no-select" onclick="toggle_modal()">X</div>
      <div class="has-scrollbar">
        <div class="box" data-balloonish="dims guts">
          <div class="content">
            <p class="heading">Legend</p>
            <table>
              <tr><th>Symbol</th><th>Site Type</th></tr>
              <tr>
                <td style="background-image: url('https://raw.githubusercontent.com/fiveham/Elections/master/docs/images/COUNTY-C.png');" 
                    title="Capital letter C"></td>
                <td>County Board of Elections</td></tr>
              <tr>
                <td style="background-image: url('https://raw.githubusercontent.com/fiveham/Elections/master/docs/images/bookstack_50x49.png');" 
                    title="Stack of books"></td>
                <td>Public Library</td></tr>
              <tr>
                <td style="background-image: url('https://raw.githubusercontent.com/fiveham/Elections/master/docs/images/blind-icon_50x40.png');" 
                    title="Eye with a diagonal line drawn over it"></td>
                <td>Dept of Services for the Blind</td></tr>
              <tr>
                <td style="background-image: url('https://raw.githubusercontent.com/fiveham/Elections/master/docs/images/ear_35x50.png');" 
                    title="Ear with a diagonal line drawn over it"></td>
                <td>Dept of Services for the Deaf and Hard-of-Hearing</td></tr>
              <tr>
                <td style="background-image: url('https://raw.githubusercontent.com/fiveham/Elections/master/docs/images/WIC-W.png');" 
                    title="Capital leter W"></td>
                <td>WIC Office (Dept of Public Health)</td></tr>
              <tr>
                <td style="background-image: url('https://raw.githubusercontent.com/fiveham/Elections/master/docs/images/NC-flag.png');" 
                    title="North Carolina state flag"></td>
                <td>NC State Board of Elections</td></tr>
              <tr>
                <td style="background-image: url('https://raw.githubusercontent.com/fiveham/Elections/master/docs/images/VOC-REHAB-V.png');" 
                    title="Capital letter V"></td>
                <td>Vocational Rehabilitation (Dept of Disability Services)</td></tr>
              <tr>
                <td style="background-image: url('https://raw.githubusercontent.com/fiveham/Elections/master/docs/images/DSS-S.png');" 
                    title="Capital letter S"></td>
                <td>Dept of Social Services</td></tr>
              <tr>
                <td style="background-image: url('http://maps.google.com/mapfiles/kml/shapes/cabs.png');" title="Car"></td>
                <td>DMV Driver License Office</td></tr>
              <tr>
                <td style="background-image: url('http://maps.google.com/mapfiles/kml/shapes/ranger_station.png');" 
                    title="Building with a flag on top"></td>
                <td>Public High School</td></tr>
              <tr>
                <td style="background-image: url('https://raw.githubusercontent.com/fiveham/Elections/master/docs/images/NC03-3.png');" 
                    title="The digit 3"></td>
                <td>One-Stop Voting Site in NC-03 Special Election</td></tr>
              <tr>
                <td style="background-image: url('https://raw.githubusercontent.com/fiveham/Elections/master/docs/images/NC09-9.png');" 
                    title="The digit 9"></td>
                <td>One-Stop Voting Site in NC-09 Special Election</td></tr>
            </table>
            <p class="heading">Sites with Voter Registration Forms in North Carolina</p>
            <p>DMV driver's license offices, public high schools, the Department of Social Services, WIC offices, public libraries,
               vocational rehabilitation offices, services for the blind, and services for the deaf and hard-of-hearing are required by 
               the NVRA (1993) to provide voter registration services; so, they carry voter registration forms and can return completed 
               forms to the appropriate county board of elections at no cost.</p>
            <p>County boards of elections and the state board of elections also carry voter registration forms and provide the same 
               opportunity to send in the form at no cost.</p>
            <p>One-stop voting sites (early voting) allow an unregistered individual to register to vote and then to immediately vote, 
               provided that the person registering 
               <a href="https://www.ncsbe.gov/Voters/Registering-to-Vote#item5_3" target="_blank">brings proof of name and 
               address.</a></p>
            <p>You can also register by mail by <a href="https://www.ncsbe.gov/Voter-Information/VR-Form" target="_blank">printing the 
               form</a>, filling it out, signing it, and mailing it to your county board of elections.</p>
            <p>If you want to provide voter registration forms to others, then 
               <a href="https://www.ncsbe.gov/Voters/Registering-to-Vote#item5_5" target="_blank">state-backed services for a voter 
               registration drive</a> may interest you.</p>
            <p class="heading">Note: Overlapping Sites</p>
            <p>In some cases, multiple NVRA sites are located at the same address, inside the same building, or otherwise in the same 
               place. In these cases, one of the sites is chosen to stand for all of them at that place. In some cases, this means that 
               a WIC office ends up hiding a county board of elections or that a library on the map conceals the presence of a DMV or 
               something.</p>
            <p class="heading">Note: Mobile Library and DMV Units</p>
            <p>Some of the library and DMV locations shown on this map are mobile locations that were associated with an address at the 
               original source of the data.</p>
          </div>
        </div>
      </div>
    </div>
    
    <!-- The map -->
    <div id="map"></div>
    
    <script>
      var map, ossites;
      var widgets;
      var triggers = ["tilesloaded", "mousemove", "zoom_changed", "idle"];
      
      function initMap() {
        /* Populate widgets after google.maps is loaded */
        widgets = [{id: "geolocation", where: google.maps.ControlPosition.TOP_LEFT}, 
                   {id: "os-toggler",  where: google.maps.ControlPosition.TOP_LEFT}, 
                   {id: "about-btn",   where: google.maps.ControlPosition.LEFT_BOTTOM},
                   {id: "about-modal", where: google.maps.ControlPosition.CENTER}];
        
        map = new google.maps.Map(document.getElementById('map'), {
          zoom: 7,
          center: {lat: 35.665577, lng: -80.092859},
          mapTypeId: 'hybrid'
        });

        var eastern1000 = new google.maps.KmlLayer({
          url: 'http://fiveham.github.io/Elections/2019/register/nc/reg-sites-1000-e.kml',
          map: map,
          preserveViewport: true,
          zIndex: 1
        });
        
        var western554 = new google.maps.KmlLayer({
          url: 'http://fiveham.github.io/Elections/2019/register/nc/reg-sites-554-w.kml',
          map: map,
          preserveViewport: true,
          zIndex: 1
        });
        
        var ncbg = new google.maps.KmlLayer({
          url: 'http://fiveham.github.io/Elections/2019/register/nc/NC-outline.kml',
          map: map,
          preserveViewport: false,
          zIndex: 0
        });
        
        ossites = new google.maps.KmlLayer({
          url: 'http://fiveham.github.io/Elections/2019/special/ossite-nc03-30apr2019.kml',
          map: map,
          preserveViewport: true,
          zIndex: 2
        });
        
        /* Turn one-stop site layer off automagically after 7PM Apr 30, the end of early voting */
        if(new Date() > new Date(2019, 4, 26, 19, 0, 0, 0)){
          ossites.setMap(null);
        }
        
        add_widgets();
      }
      
      /* Add listed widgets to the map and make them visible (set opacity to 1) */
      function add_widgets(){
        widgets.forEach(function(widget){
          var element = document.getElementById(widget.id);
          map.controls[widget.where].push(element); /* Add widget to the map */
          triggers.forEach(function(t){
            google.maps.event.addListenerOnce(map, t, function(){
              element.style.opacity = "1"; /* Set opacity to 1 */
            });
          });
        });
      }
      
      function os_toggle(){
        ossites.setMap( ossites.getMap() ? null : map );
      }
      
      function toggle_modal(){
        var modal = document.getElementById("about-modal");
        modal.style.visibility = (modal.style.visibility == "visible" 
                                  ? "hidden" 
                                  : "visible");
      }
    </script>
    <script src="/Elections/js/geolocator.js"></script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAQzE_F2ZqhXc_tIW4sfBOJBOsAKITo2JA&callback=initMap">
    </script>
  </body>
</html>
